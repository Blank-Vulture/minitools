# Security Policy

## Supported Versions

以下のバージョンでセキュリティアップデートを提供しています：

| Version | Supported          |
| ------- | ------------------ |
| 2.1.x   | :white_check_mark: |
| 2.0.x   | :x:                |
| < 2.0   | :x:                |

## セキュリティ原則

DocKeeperは以下のセキュリティ原則に基づいて開発されています：

### 🔒 コア原則
- **最小権限の原則**: 必要最小限の権限のみで動作
- **Defense in Depth**: 多層防御によるセキュリティ確保
- **Fail-Safe**: エラー時はセキュアな状態を維持
- **透明性**: セキュリティ機能の動作を明確に記録

### 🛡️ 実装されているセキュリティ対策

#### 入力検証
- 全てのコマンドライン引数の厳密な検証
- パスインジェクション攻撃の防止
- コマンドインジェクション攻撃の防止

#### 実行環境の保護
- `set -euo pipefail` による厳格なエラーハンドリング
- 一時ファイルの安全な生成と削除
- 環境変数の適切な処理

#### データ保護
- ログファイルに機密情報を出力しない設計
- バックアップファイルの適切な権限設定
- 設定ファイルの安全な処理

#### 依存関係の管理
- 公式Homebrewリポジトリのみの使用
- 外部依存関係の最小化
- 依存関係の定期的なセキュリティチェック


## セキュリティベストプラクティス

### 👥 利用者向け

DocKeeperを安全に使用するために：

- **最新版の使用**: 常に最新版のDocKeeperを使用してください
- **権限の確認**: スクリプト実行前に必要な権限を確認してください
- **Dry-runの活用**: 本格実行前に`--dry-run`で動作を確認してください
- **ログの監視**: ログファイルで異常な動作がないか確認してください

### 🔧 開発者向け

DocKeeperの開発に貢献する場合：

- **セキュリティテストの実行**: PRする前に`./test_dockeeper.sh`を実行
- **ShellCheckの使用**: 静的解析ツールでコードをチェック
- **機密情報の除外**: ログや出力に機密情報を含めない
- **最小権限の実装**: 必要最小限の権限で動作するように実装

## セキュリティツール

プロジェクトでは以下のセキュリティツールを使用：

- **ShellCheck**: Bashスクリプトの静的解析
- **Bandit**: セキュリティ脆弱性の検出
- **GitHub Secret Scanning**, **GitGuardian**: 機密情報の漏洩検知
- **Dependabot**: 依存関係の脆弱性監視
